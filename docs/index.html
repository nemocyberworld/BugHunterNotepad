<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ¨ Bug Hunter Notepad</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    textarea { resize: vertical; }
    summary::-webkit-details-marker { display: none; }
  </style>
</head>
<body class="bg-gray-900 text-white font-mono min-h-screen">
  <div class="flex min-h-screen">

    <!-- Left Sidebar -->
    <aside class="w-64 bg-gray-800 p-4 border-r border-green-700 flex flex-col">
      <h2 class="text-green-400 text-xl font-bold mb-4 text-center">ğŸ›  Bug Hunter Notepad</h2>

      <input id="newCategory" type="text" placeholder="New category..."
        class="bg-gray-900 border border-green-500 p-2 rounded w-full mb-2" />
      <button onclick="addCategory()" class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded mb-4">â• Add Category</button>

      <nav id="sidebarMenu" class="flex-1 mt-2 space-y-2 text-sm overflow-auto">
        <!-- Dynamic category links will be injected here -->
      </nav>

      <div class="mt-4 space-y-2">
        <button onclick="exportData()" class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm">ğŸ“¤ Export Notes</button>
        <label for="importFile" class="w-full block bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded text-center cursor-pointer text-sm">ğŸ“¥ Import Notes</label>
        <input type="file" id="importFile" accept=".json" class="hidden" onchange="importData(event)" />
        <button onclick="deleteAllData()" class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm mt-2">ğŸ—‘ï¸ Delete All Data</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto">
      <div id="categories" class="space-y-6"></div>

      <footer class="text-center text-xs text-gray-500 mt-10">
        Data saved locally in your browser &mdash; HackToLive Notepad
      </footer>
    </main>

    <!-- Right Sidebar -->
    <aside class="w-64 bg-gray-800 p-4 border-l border-green-700 overflow-y-auto">
      <h2 class="text-green-400 text-lg font-bold mb-4 text-center">ğŸ”— Resources</h2>
      <ul class="space-y-2 text-sm">
        <li><a href="https://nemocyberworld.github.io/BugBountyCheckList/" target="_blank" class="text-blue-400 hover:underline">Bug Bounty Checklist</a></li>
        <li><a href="https://pentester.land" target="_blank" class="text-blue-400 hover:underline">Pentester.land</a></li>
        <li><a href="https://hackerone.com/hacktivity" target="_blank" class="text-blue-400 hover:underline">HackerOne Hacktivity</a></li>
        <li><a href="https://www.shodan.io" target="_blank" class="text-blue-400 hover:underline">Shodan</a></li>
        <li><a href="https://crt.sh" target="_blank" class="text-blue-400 hover:underline">crt.sh - Cert Transparency</a></li>
        <li><a href="https://hunter.io" target="_blank" class="text-blue-400 hover:underline">Hunter.io</a></li>
        <li><a href="https://www.exploit-db.com" target="_blank" class="text-blue-400 hover:underline">Exploit DB</a></li>
        <li><a href="https://github.com/swisskyrepo/PayloadsAllTheThings" target="_blank" class="text-blue-400 hover:underline">PayloadsAllTheThings</a></li>
        <li><a href="https://osintframework.com" target="_blank" class="text-blue-400 hover:underline">OSINT Framework</a></li>
        <li><a href="https://gf.dev" target="_blank" class="text-blue-400 hover:underline">GF Pattern Generator</a></li>
        <li><a href="https://www.revshells.com" target="_blank" class="text-blue-400 hover:underline">Reverse Shell Generator</a></li>
      </ul>
    </aside>

  </div>

  <script>
    let data = JSON.parse(localStorage.getItem('bugHunterData')) || {};
    let selectedCategory = null;

    function saveData() {
      localStorage.setItem('bugHunterData', JSON.stringify(data));
    }

    function addCategory() {
      const name = document.getElementById('newCategory').value.trim();
      if (!name || data[name]) return alert("Invalid or duplicate category name!");
      data[name] = [];
      document.getElementById('newCategory').value = '';
      saveData();
      renderSidebar();
      renderCategories();
    }

    function addItem(category) {
      const title = prompt("Enter item name:");
      if (!title) return;
      data[category].push({ title, note: '' });
      saveData();
      renderCategories();
    }

    function deleteItem(category, index) {
      if (!confirm("Delete this item?")) return;
      data[category].splice(index, 1);
      saveData();
      renderCategories();
    }

    function updateNote(category, index, value) {
      data[category][index].note = value;
      saveData();
    }

    function renderSidebar() {
      const nav = document.getElementById('sidebarMenu');
      nav.innerHTML = '';
      Object.keys(data).forEach(cat => {
        const btn = document.createElement('button');
        btn.textContent = cat;
        btn.className = 'block w-full text-left px-3 py-2 rounded hover:bg-green-700 ' + (selectedCategory === cat ? 'bg-green-700' : '');
        btn.onclick = () => {
          selectedCategory = cat;
          renderSidebar();
          renderCategories();
        };
        nav.appendChild(btn);
      });
    }

    function renderCategories() {
      const container = document.getElementById('categories');
      container.innerHTML = '';
      const categories = selectedCategory ? [selectedCategory] : Object.keys(data);
      categories.forEach(category => {
        const section = document.createElement('section');

        const header = document.createElement('div');
        header.className = 'flex justify-between items-center mb-2';
        header.innerHTML = `
          <h2 class="text-2xl text-green-400 font-bold">ğŸ“‚ ${category}</h2>
          <button onclick="addItem('${category}')" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">â• Add Item</button>`;

        const list = document.createElement('div');
        list.className = 'space-y-4 mt-2';
        data[category].forEach((item, idx) => {
          const div = document.createElement('div');
          div.className = 'bg-gray-800 border border-green-700 p-4 rounded';

          div.innerHTML = `
            <div class="flex justify-between items-center mb-2">
              <strong class="text-green-300 text-lg">${item.title}</strong>
              <button onclick="deleteItem('${category}', ${idx})" class="text-red-400 text-sm">Delete</button>
            </div>
            <textarea class="w-full bg-gray-700 border border-green-500 p-2 rounded" rows="5"
              oninput="updateNote('${category}', ${idx}, this.value)">${item.note}</textarea>`;

          list.appendChild(div);
        });

        section.appendChild(header);
        section.appendChild(list);
        container.appendChild(section);
      });
    }

    // EXPORT DATA FUNCTION
    function exportData() {
      const dataStr = JSON.stringify(data, null, 2);
      const blob = new Blob([dataStr], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'bughunter_notes_backup.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // IMPORT DATA FUNCTION
    function importData(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = e => {
        try {
          const importedData = JSON.parse(e.target.result);
          if (typeof importedData === 'object' && importedData !== null) {
            data = importedData;
            selectedCategory = null;
            saveData();
            renderSidebar();
            renderCategories();
            alert('Notes imported successfully!');
          } else {
            alert('Invalid file format.');
          }
        } catch {
          alert('Error parsing JSON.');
        }
      };
      reader.readAsText(file);
      // Clear the input so same file can be imported again if needed
      event.target.value = '';
    }

    // DELETE ALL DATA FUNCTION
    function deleteAllData() {
      if (confirm("âš ï¸ Are you sure you want to DELETE ALL your notes and categories? This action cannot be undone.")) {
        data = {};
        selectedCategory = null;
        localStorage.removeItem('bugHunterData');
        renderSidebar();
        renderCategories();
      }
    }

    renderSidebar();
    renderCategories();
  </script>
</body>
</html>
